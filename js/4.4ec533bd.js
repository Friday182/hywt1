(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"1f54":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fixed-center text-center"},[n("p",{staticClass:"text-faded"},[e._v("\n    此页面正在建设中 ..."),n("strong",[e._v("(加油！)")])])])}],o={name:"Error404",data:function(){return{}},mounted:function(){}},r=o,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},"27c3":function(e,t,n){"use strict";var a=n("c442"),i=n.n(a);i.a},"33e8":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"border-card",editable:""},on:{edit:e.handleTabsEdit},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabs,(function(e){return n("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[n("sub-page",{attrs:{index:e.name}})],1)})),1)},i=[],o=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("7f7f"),n("c47a")),r=n.n(o),l=n("2f62"),c="ws://127.0.0.1:8082/ws",s="",u=null;function d(){console.log("start create websocket"),s?console.log("websocket已连接"):(s=new WebSocket(c),s.onopen=f,s.onmessage=b,s.onerror=p,s.onclose=m)}function f(){v()}function p(){clearInterval(u),s.close(),d()}function b(e){window.dispatchEvent(new CustomEvent("onmessageWS",{detail:{data:e}}))}function m(){clearInterval(u),console.log("websocket已断开")}function v(){s.send("ping"),u=setInterval((function(){s.send("ping"),console.log("sending ping ...")}),5e3)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={name:"Hywt",components:{"sub-page":n("ce3d").default},data:function(){return{curTab:"1-1"}},computed:h({},Object(l["c"])("currentInfo",["currentInfo"]),{},Object(l["d"])("currentInfo",["setActiveTab"]),{loginRole:function(){return this.currentInfo.userRole},tabs:function(){return this.currentInfo.tabs},activeTab:{get:function(){return this.currentInfo.activeTab},set:function(e){console.log("set active tab - ",e)}}}),mounted:function(){d(),window.addEventListener("onmessageWS",this.processData)},beforeDestroy:function(){window.removeEventListener("onmessageWS",this.processData)},methods:h({},Object(l["b"])("currentInfo",["removeTab"]),{handleTabsEdit:function(e,t){var n=this;console.log("in edit - ",e,t),"remove"===t&&this.tabs.forEach((function(t,a){t.name===e&&n.removeTab(t)}))},processData:function(e){var t=e.detail.data.data,n=JSON.parse(t);console.log(n);var a=JSON.parse(n.data);console.log(a.dob)}})},O=y,k=n("2877"),w=Object(k["a"])(O,a,i,!1,null,null,null);t["default"]=w.exports},"363c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-px-sm"},[n("q-card",[n("q-page-sticky",{attrs:{position:"right",offset:[100,100]}},[n("q-btn",{attrs:{rounded:"","no-caps":"",glossy:"",color:"blue",label:"Submit",size:"lg"},on:{click:function(t){return e.changeDone(0)}}})],1),n("q-card-section",{staticStyle:{width:"30%"},attrs:{align:"left"}},[n("q-input",{attrs:{"bottom-slots":"",label:"姓名",dense:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"face"}})]},proxy:!0}]),model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("q-input",{attrs:{label:"身份证号",dense:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",align:"right","picker-options":e.pickerOptions},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),n("q-card-section",{staticStyle:{width:"50%"},attrs:{align:"left"}},[n("pre",[e._v("        "+e._s(e.jsonData)+"\n      ")])]),n("q-card-section",{staticStyle:{width:"50%"},attrs:{align:"left"}},[n("q-btn",{attrs:{label:"signup"},on:{click:e.testSignup}}),n("q-btn",{attrs:{label:"login"},on:{click:e.testLogin}}),n("pre",[e._v("        "+e._s(e.info)+"\n      ")])],1)],1)],1)},i=[],o=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),r=n.n(o),l=(n("7f7f"),n("2f62")),c=n("4ec3");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"StudentProfile",data:function(){return{alert:!1,active:!1,info:"",name:"",id:"",selDatetime:"",pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){this.selDatetime=JSON.stringify(Date()),e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),this.selDatetime=JSON.stringify(t),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),this.selDatetime=JSON.stringify(t),e.$emit("pick",t)}}]},value2:""}},computed:{jsonData:function(){return{name:this.name,gender:"男",ethnic:"汉",id:this.id,dob:"20010101",block:"高大上小区",enter:"进入",deviceid:"device-123",datetime:this.selDatetime}}},methods:u({},Object(l["d"])("visitor",["addVisitor"]),{},Object(l["d"])("currentInfo",["setActiveTab"]),{changeDone:function(e){console.log("datetime = ",this.selDatetime),this.addVisitor(this.jsonData),this.setActiveTab("1-1"),this.postData()},postData:function(){var e=this;console.log("post data"),Object(c["a"])({vistor:this.jsonData}).then((function(t){return e.info=t}))},testSignup:function(){var e=this;console.log("signup"),Object(c["c"])({username:this.name,password:"test123"}).then((function(t){return e.info=t}))},testLogin:function(){var e=this;console.log("login"),Object(c["b"])({username:this.name,password:"test123"}).then((function(t){e.info=t,200===t.data.code?(localStorage.setItem("access_token",t.data.token),console.log("set token ok - ",t.data.token)):console.log("not ok")}))}})},f=d,p=n("2877"),b=Object(p["a"])(f,a,i,!1,null,null,null);t["default"]=b.exports},"3a95":function(e,t,n){},"4ec3":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return l}));n("551c"),n("06db");var a=n("bc3a"),i=n.n(a);i.a.defaults.baseURL="http://127.0.0.1:8082/",i.a.interceptors.request.use((function(e){return console.log(e),localStorage.getItem("access_token"),e.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",e}),(function(e){return console.log(e),Promise.reject(e)}));var o=function(e){return i.a.post("/login",e)},r=function(e){return i.a.post("/signup",e)},l=function(e){return i.a.post("/api/visitor",e)}},9280:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("search-bar"),n("q-table",{attrs:{title:"访客记录",data:e.tableData,columns:e.columns,"visible-columns":e.visibleColumns,separator:"cell","wrap-cells":"","row-key":"date","table-header-style":{backgroundColor:"lightblue"},"fixed-center":"",bordered:"",dense:"",pagination:e.pagination,loading:e.loading},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(t){return[n("div",{staticClass:"col-2 q-table__title"},[n("q-chip",{staticStyle:{font:"50% Cursive"},attrs:{size:"xs","text-color":"blue"}},[e._v("\n          访客记录\n        ")])],1),n("q-space"),n("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",dense:"","options-dense":"","display-value":"选择显示列","emit-value":"","map-options":"",options:e.columns,"option-value":"name"},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}}),n("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}},{key:"body-cell-action",fn:function(t){return n("q-td",{attrs:{props:t}},[e.isDeletable?n("q-btn",{attrs:{flat:"",icon:"delete"},on:{click:function(n){return e.toDeleteLog(t.row.datetime,t.row.deviceid)}}}):e._e()],1)}}])}),n("alert-msg",{attrs:{active:e.alert,msg:e.alertMsg},on:{cancelAlert:e.alertClose}})],1)},i=[],o=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),r=n.n(o),l=(n("c5f6"),n("2f62"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={name:"Visitors",components:{"alert-msg":n("a5aa").default,"search-bar":n("fbd6").default},props:{studentId:{type:Number,default:0}},data:function(){return{isDeletable:!0,alert:!1,alertMsg:"",pagination:{page:0,rowsPerPage:10},visibleColumns:["datetime","name","gender","ethnic","id","dob","block","enter","deviceid"],columns:[{name:"datetime",align:"center",label:"访问时间",field:"datetime",sortable:!0},{name:"name",align:"center",label:"姓名",field:"name",sortable:!0},{name:"gender",align:"center",label:"性别",field:"gender",sortable:!0},{name:"ethnic",align:"center",label:"民族",field:"ethnic",sortable:!0},{name:"id",align:"center",label:"身份证号",field:"id",sortable:!0},{name:"dob",align:"center",label:"生日",field:"dob",sortable:!0},{name:"block",align:"center",label:"出入社区",field:"block",sortable:!0},{name:"enter",align:"center",label:"通行类型",field:"enter",sortable:!0},{name:"deviceid",align:"center",label:"设备号",field:"deviceid",sortable:!0},{name:"action",align:"center",label:"action",field:"action",sortable:!1}],loading:!1}},computed:s({},Object(l["c"])("visitor",["visitor"]),{tableData:function(){return this.visitor.visitorLog}}),mounted:function(){console.log("task log table mounted - ")},destroyed:function(){console.log("task log table destroied")},methods:s({},Object(l["d"])("visitor",["removeVisitor"]),{toDeleteLog:function(e,t){for(var n=0;n<this.tableData.length;n++)this.tableData[n].datetime===e&&this.tableData[n].deviceid===t&&this.removeVisitor(this.tableData[n])},alertClose:function(){this.alert=!1,this.alertMsg=""}})},d=u,f=(n("e9be"),n("2877")),p=Object(f["a"])(d,a,i,!1,null,null,null);t["default"]=p.exports},a5aa:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("q-card",[n("q-card-section",{staticClass:"q-px-lg q-ma-md primary"},[n("div",{staticClass:"text-h6 text-blue"},[e._v("\n        "+e._s(e.msg)+"\n      ")])]),n("q-card-actions",{attrs:{align:"center"}},[n("q-btn",{attrs:{label:"OK",color:"primary"},on:{click:function(t){return e.cancelAlert(1)}}})],1)],1)],1)},i=[],o={name:"AlertCom",props:{active:{type:Boolean,default:!1},msg:{type:String,default:""}},data:function(){return{}},created:function(){document.addEventListener("keyup",this.handleKeyup)},destroyed:function(){document.removeEventListener("keyup",this.handleKeyup)},methods:{handleKeyup:function(e){13===e.keyCode&&this.cancelAlert()},cancelAlert:function(e){this.$emit("cancelAlert",e)}}},r=o,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},bd0d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fixed-center text-center"},[e._m(0),e._v("\n  "+e._s(e.info)+"\n  "),n("q-btn",{staticStyle:{width:"200px"},attrs:{color:"secondary"},on:{click:function(t){return e.$router.push("/Hywt")}}},[e._v("\n    Go back\n  ")])],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-faded"},[e._v("\n    首页正在建设中 ..."),n("strong",[e._v("(首页)")])])}],o={name:"Error404",data:function(){return{info:null}},mounted:function(){var e=this;this.$axios.get("https://api.coindesk.com/v1/bpi/currentprice.json").then((function(t){return e.info=t}))}},r=o,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},c442:function(e,t,n){},ce3d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-px-sm"},["1-1"===e.index?n("div",[n("visitors")],1):"1-2"===e.index?n("div",[n("cert-info")],1):"2"===e.index?n("div",[n("not-available")],1):"3"===e.index?n("div",[n("not-available")],1):"4"===e.index?n("div",[n("not-available")],1):"5"===e.index?n("div",[n("test-page")],1):e._e()])},i=[],o={name:"SubPage",components:{"test-page":n("363c").default,"not-available":n("1f54").default,"cert-info":n("bd0d").default,visitors:n("9280").default},props:{index:{type:String,default:"1-1"}},data:function(){return{}},methods:{}},r=o,l=n("2877"),c=Object(l["a"])(r,a,i,!1,null,null,null);t["default"]=c.exports},e9be:function(e,t,n){"use strict";var a=n("3a95"),i=n.n(a);i.a},fbd6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-2 q-mr-sm"},[n("el-select",{attrs:{filterable:"",size:"mini",placeholder:"所属省份"},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.provinceOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("div",{staticClass:"col-2 q-mr-sm"},[n("el-select",{attrs:{filterable:"",size:"mini",placeholder:"选择城市"},scopedSlots:e._u([{key:"prefix",fn:function(){return[n("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.cityOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("div",{staticClass:"col-2 q-mr-sm"},[n("el-input",{attrs:{size:"mini",placeholder:"身份证号码",clearable:""},model:{value:e.inId,callback:function(t){e.inId=t},expression:"inId"}})],1),n("div",{staticClass:"col-2 q-mr-sm"},[n("el-input",{attrs:{size:"mini",placeholder:"社区名称",clearable:""},model:{value:e.inId,callback:function(t){e.inId=t},expression:"inId"}})],1)]),n("div",{staticClass:"row q-my-sm"},[n("div",{staticClass:"col-4 q-mr-sm"},[n("el-date-picker",{attrs:{size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),n("q-space"),n("div",{staticClass:"col-2"},[n("q-btn",{staticStyle:{font:"100% Cursive"},attrs:{label:"查 询",outlined:"",dense:"",color:"primary"},on:{click:function(t){return e.selected()}}}),n("q-btn",{staticClass:"q-ml-sm",staticStyle:{font:"100% Cursive"},attrs:{label:"重 置",outlined:"",dense:"",color:"primary"},on:{click:function(t){return e.selected()}}})],1)],1)])},i=[],o={name:"Error404",data:function(){return{inId:"",city:"",province:"",provinceOptions:[{value:"选项1",label:"新疆"},{value:"选项2",label:"甘肃"},{value:"选项3",label:"陕西"},{value:"选项4",label:"四川"},{value:"选项5",label:"河南"}],cityOptions:[{value:"选项1",label:"乌鲁木齐"},{value:"选项2",label:"石河子"},{value:"选项3",label:"伊犁"},{value:"选项4",label:"库尔勒"},{value:"选项5",label:"克拉玛依"}],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},value2:""}},methods:{select:function(){console.log("start search ...")}}},r=o,l=(n("27c3"),n("2877")),c=Object(l["a"])(r,a,i,!1,null,"8dd615b4",null);t["default"]=c.exports}}]);